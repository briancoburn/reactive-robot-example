{"ast":null,"code":"var _jsxFileName = \"/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { scaleLinear } from 'd3-scale';\nimport { max, sum } from 'd3-array';\nimport { select } from 'd3-selection';\nimport { legendColor } from 'd3-svg-legend';\nimport { transition } from 'd3-transition';\n\nclass BarChartD3 extends Component {\n  constructor(props) {\n    super(props);\n    this.createBarChart = this.createBarChart.bind(this);\n  }\n\n  componentDidMount() {\n    this.createBarChart();\n  }\n\n  componentDidUpdate() {\n    this.createBarChart();\n  }\n\n  createBarChart() {\n    const node = document.getElementById('#svgElement');\n    console.log('node:', node);\n\n    if (!node) {\n      return null;\n    }\n\n    const dataMax = max(this.props.data.map(d => sum(d.data)));\n    const barWidth = this.props.size[0] / this.props.data.length;\n    const legend = legendColor().scale(this.props.colorScale).labels([\"Wave 1\", \"Wave 2\", \"Wave 3\", \"Wave 4\"]);\n    select(node).selectAll(\"g.legend\").data([0]).enter().append(\"g\").attr(\"class\", \"legend\").call(legend);\n    select(node).select(\"g.legend\").attr(\"transform\", \"translate(\" + (this.props.size[0] - 100) + \", 20)\");\n    const yScale = scaleLinear().domain([0, dataMax]).range([0, this.props.size[1]]);\n    select(node).selectAll(\"rect.bar\").data(this.props.data).enter().append(\"rect\").attr(\"class\", \"bar\").on(\"mouseover\", this.props.onHover);\n    select(node).selectAll(\"rect.bar\").data(this.props.data).exit().remove();\n    select(node).selectAll(\"rect.bar\").data(this.props.data).attr(\"x\", (d, i) => i * barWidth).attr(\"y\", d => this.props.size[1] - yScale(sum(d.data))).attr(\"height\", d => yScale(sum(d.data))).attr(\"width\", barWidth).style(\"fill\", (d, i) => this.props.hoverElement === d.id ? \"#FCBC34\" : this.props.colorScale(d.launchday)).style(\"stroke\", \"black\").style(\"stroke-opacity\", 0.25);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      id: 'svgElement',\n      width: this.props.size[0],\n      height: this.props.size[1],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 12\n      }\n    });\n  }\n\n}\n\nexport default BarChartD3;","map":{"version":3,"sources":["/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js"],"names":["React","Component","scaleLinear","max","sum","select","legendColor","transition","BarChartD3","constructor","props","createBarChart","bind","componentDidMount","componentDidUpdate","node","document","getElementById","console","log","dataMax","data","map","d","barWidth","size","length","legend","scale","colorScale","labels","selectAll","enter","append","attr","call","yScale","domain","range","on","onHover","exit","remove","i","style","hoverElement","id","launchday","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,UAAzB;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,QAA2B,eAA3B;;AAEA,MAAMC,UAAN,SAAyBP,SAAzB,CAAmC;AACjCQ,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKF,cAAL;AACD;;AAEDG,EAAAA,kBAAkB,GAAG;AACnB,SAAKH,cAAL;AACD;;AAEDA,EAAAA,cAAc,GAAG;AACf,UAAMI,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAb;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,IAArB;;AACA,QAAG,CAACA,IAAJ,EAAS;AACP,aAAO,IAAP;AACD;;AAED,UAAMK,OAAO,GAAGjB,GAAG,CAAC,KAAKO,KAAL,CAAWW,IAAX,CAAgBC,GAAhB,CAAoBC,CAAC,IAAInB,GAAG,CAACmB,CAAC,CAACF,IAAH,CAA5B,CAAD,CAAnB;AACA,UAAMG,QAAQ,GAAG,KAAKd,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqB,KAAKf,KAAL,CAAWW,IAAX,CAAgBK,MAAtD;AAEA,UAAMC,MAAM,GAAGrB,WAAW,GACrBsB,KADU,CACJ,KAAKlB,KAAL,CAAWmB,UADP,EAEVC,MAFU,CAEH,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,CAFG,CAAf;AAIAzB,IAAAA,MAAM,CAACU,IAAD,CAAN,CACKgB,SADL,CACe,UADf,EAEKV,IAFL,CAEU,CAAC,CAAD,CAFV,EAGKW,KAHL,GAIKC,MAJL,CAIY,GAJZ,EAKKC,IALL,CAKU,OALV,EAKmB,QALnB,EAMKC,IANL,CAMUR,MANV;AAQAtB,IAAAA,MAAM,CAACU,IAAD,CAAN,CACKV,MADL,CACY,UADZ,EAEK6B,IAFL,CAEU,WAFV,EAEuB,gBAAgB,KAAKxB,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqB,GAArC,IAA4C,OAFnE;AAIA,UAAMW,MAAM,GAAGlC,WAAW,GACrBmC,MADU,CACH,CAAC,CAAD,EAAIjB,OAAJ,CADG,EAEVkB,KAFU,CAEJ,CAAC,CAAD,EAAI,KAAK5B,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAAJ,CAFI,CAAf;AAIApB,IAAAA,MAAM,CAACU,IAAD,CAAN,CACKgB,SADL,CACe,UADf,EAEKV,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKW,KAHL,GAIKC,MAJL,CAIY,MAJZ,EAKKC,IALL,CAKU,OALV,EAKmB,KALnB,EAMKK,EANL,CAMQ,WANR,EAMqB,KAAK7B,KAAL,CAAW8B,OANhC;AAQAnC,IAAAA,MAAM,CAACU,IAAD,CAAN,CACKgB,SADL,CACe,UADf,EAEKV,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKoB,IAHL,GAIKC,MAJL;AAMArC,IAAAA,MAAM,CAACU,IAAD,CAAN,CACKgB,SADL,CACe,UADf,EAEKV,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKa,IAHL,CAGU,GAHV,EAGe,CAACX,CAAD,EAAGoB,CAAH,KAASA,CAAC,GAAGnB,QAH5B,EAIKU,IAJL,CAIU,GAJV,EAIeX,CAAC,IAAI,KAAKb,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqBW,MAAM,CAAChC,GAAG,CAACmB,CAAC,CAACF,IAAH,CAAJ,CAJ/C,EAKKa,IALL,CAKU,QALV,EAKoBX,CAAC,IAAIa,MAAM,CAAChC,GAAG,CAACmB,CAAC,CAACF,IAAH,CAAJ,CAL/B,EAMKa,IANL,CAMU,OANV,EAMmBV,QANnB,EAOKoB,KAPL,CAOW,MAPX,EAOmB,CAACrB,CAAD,EAAGoB,CAAH,KAAS,KAAKjC,KAAL,CAAWmC,YAAX,KAA4BtB,CAAC,CAACuB,EAA9B,GAAmC,SAAnC,GAA+C,KAAKpC,KAAL,CAAWmB,UAAX,CAAsBN,CAAC,CAACwB,SAAxB,CAP3E,EAQKH,KARL,CAQW,QARX,EAQqB,OARrB,EASKA,KATL,CASW,gBATX,EAS6B,IAT7B;AAWD;;AAEDI,EAAAA,MAAM,GAAG;AAEP,wBAAO;AAAK,MAAA,EAAE,EAAE,YAAT;AAAuB,MAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAA9B;AAAkD,MAAA,MAAM,EAAE,KAAKf,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAED;;AA3EgC;;AA8EnC,eAAejB,UAAf","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\nimport { scaleLinear } from 'd3-scale'\nimport { max, sum } from 'd3-array'\nimport { select } from 'd3-selection'\nimport { legendColor } from 'd3-svg-legend'\nimport { transition } from 'd3-transition'\n\nclass BarChartD3 extends Component {\n  constructor(props){\n    super(props)\n    this.createBarChart = this.createBarChart.bind(this)\n  }\n\n  componentDidMount() {\n    this.createBarChart()\n  }\n\n  componentDidUpdate() {\n    this.createBarChart()\n  }\n\n  createBarChart() {\n    const node = document.getElementById('#svgElement')\n    console.log('node:', node)\n    if(!node){\n      return null\n    }\n\n    const dataMax = max(this.props.data.map(d => sum(d.data)))\n    const barWidth = this.props.size[0] / this.props.data.length\n\n    const legend = legendColor()\n        .scale(this.props.colorScale)\n        .labels([\"Wave 1\", \"Wave 2\", \"Wave 3\", \"Wave 4\"])\n\n    select(node)\n        .selectAll(\"g.legend\")\n        .data([0])\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"legend\")\n        .call(legend)\n\n    select(node)\n        .select(\"g.legend\")\n        .attr(\"transform\", \"translate(\" + (this.props.size[0] - 100) + \", 20)\")\n\n    const yScale = scaleLinear()\n        .domain([0, dataMax])\n        .range([0, this.props.size[1]])\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .on(\"mouseover\", this.props.onHover)\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .exit()\n        .remove()\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .attr(\"x\", (d,i) => i * barWidth)\n        .attr(\"y\", d => this.props.size[1] - yScale(sum(d.data)))\n        .attr(\"height\", d => yScale(sum(d.data)))\n        .attr(\"width\", barWidth)\n        .style(\"fill\", (d,i) => this.props.hoverElement === d.id ? \"#FCBC34\" : this.props.colorScale(d.launchday))\n        .style(\"stroke\", \"black\")\n        .style(\"stroke-opacity\", 0.25)\n\n  }\n\n  render() {\n\n    return <svg id={'svgElement'} width={this.props.size[0]} height={this.props.size[1]}>\n    </svg>\n  }\n}\n\nexport default BarChartD3\n"]},"metadata":{},"sourceType":"module"}