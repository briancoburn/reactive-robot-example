{"ast":null,"code":"var _jsxFileName = \"/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { scaleLinear } from 'd3-scale';\nimport { max, sum } from 'd3-array';\nimport { select } from 'd3-selection';\nimport { legendColor } from 'd3-svg-legend';\nimport { transition } from 'd3-transition';\nimport { scaleThreshold } from 'd3-scale';\nconst colorScale = scaleThreshold().domain([5, 10, 20, 30]).range([\"#75739F\", \"#5EAFC6\", \"#41A368\", \"#93C464\"]);\n\nclass BarChartD3 extends Component {\n  constructor(props) {\n    super(props);\n    this.createBarChart = this.createBarChart.bind(this);\n  }\n\n  componentDidMount() {\n    this.createBarChart();\n  }\n\n  componentDidUpdate() {\n    this.createBarChart();\n  }\n\n  createBarChart() {\n    const node = document.getElementById('svgElement');\n    console.log('node:', node);\n\n    if (!node) {\n      return null;\n    }\n\n    const dataMax = max(this.props.data.map(d => sum(d.data)));\n    const barWidth = this.props.size[0] / this.props.data.length;\n    const legend = legendColor().scale(colorScale).labels([\"Wave 1\", \"Wave 2\", \"Wave 3\", \"Wave 4\"]);\n    select(node).selectAll(\"g.legend\").data([0]).enter().append(\"g\").attr(\"class\", \"legend\").call(legend);\n    select(node).select(\"g.legend\").attr(\"transform\", \"translate(\" + (this.props.size[0] - 100) + \", 20)\");\n    const yScale = scaleLinear().domain([0, dataMax]).range([0, this.props.size[1]]);\n    select(node).selectAll(\"rect.bar\").data(this.props.data).enter().append(\"rect\").attr(\"class\", \"bar\").on(\"mouseover\", this.props.onHover);\n    select(node).selectAll(\"rect.bar\").data(this.props.data).exit().remove();\n    select(node).selectAll(\"rect.bar\").data(this.props.data).attr(\"x\", (d, i) => i * barWidth).attr(\"y\", d => this.props.size[1] - yScale(sum(d.data))).attr(\"height\", d => yScale(sum(d.data))).attr(\"width\", barWidth).style(\"fill\", (d, i) => this.props.hoverElement === d.id ? \"#FCBC34\" : this.props.colorScale(d.launchday)).style(\"stroke\", \"black\").style(\"stroke-opacity\", 0.25);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      id: 'svgElement',\n      width: this.props.size[0],\n      height: this.props.size[1],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 12\n      }\n    });\n  }\n\n}\n\nexport default BarChartD3;","map":{"version":3,"sources":["/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js"],"names":["React","Component","scaleLinear","max","sum","select","legendColor","transition","scaleThreshold","colorScale","domain","range","BarChartD3","constructor","props","createBarChart","bind","componentDidMount","componentDidUpdate","node","document","getElementById","console","log","dataMax","data","map","d","barWidth","size","length","legend","scale","labels","selectAll","enter","append","attr","call","yScale","on","onHover","exit","remove","i","style","hoverElement","id","launchday","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,SAASC,GAAT,EAAcC,GAAd,QAAyB,UAAzB;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,cAAT,QAA+B,UAA/B;AAEA,MAAMC,UAAU,GAAGD,cAAc,GAAGE,MAAjB,CAAwB,CAAC,CAAD,EAAG,EAAH,EAAM,EAAN,EAAS,EAAT,CAAxB,EAAsCC,KAAtC,CAA4C,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,CAA5C,CAAnB;;AAEA,MAAMC,UAAN,SAAyBX,SAAzB,CAAmC;AACjCY,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKF,cAAL;AACD;;AAEDG,EAAAA,kBAAkB,GAAG;AACnB,SAAKH,cAAL;AACD;;AAEDA,EAAAA,cAAc,GAAG;AACf,UAAMI,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAb;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,IAArB;;AACA,QAAG,CAACA,IAAJ,EAAS;AACP,aAAO,IAAP;AACD;;AAED,UAAMK,OAAO,GAAGrB,GAAG,CAAC,KAAKW,KAAL,CAAWW,IAAX,CAAgBC,GAAhB,CAAoBC,CAAC,IAAIvB,GAAG,CAACuB,CAAC,CAACF,IAAH,CAA5B,CAAD,CAAnB;AACA,UAAMG,QAAQ,GAAG,KAAKd,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqB,KAAKf,KAAL,CAAWW,IAAX,CAAgBK,MAAtD;AAEA,UAAMC,MAAM,GAAGzB,WAAW,GACrB0B,KADU,CACJvB,UADI,EAEVwB,MAFU,CAEH,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,CAFG,CAAf;AAIA5B,IAAAA,MAAM,CAACc,IAAD,CAAN,CACKe,SADL,CACe,UADf,EAEKT,IAFL,CAEU,CAAC,CAAD,CAFV,EAGKU,KAHL,GAIKC,MAJL,CAIY,GAJZ,EAKKC,IALL,CAKU,OALV,EAKmB,QALnB,EAMKC,IANL,CAMUP,MANV;AAQA1B,IAAAA,MAAM,CAACc,IAAD,CAAN,CACKd,MADL,CACY,UADZ,EAEKgC,IAFL,CAEU,WAFV,EAEuB,gBAAgB,KAAKvB,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqB,GAArC,IAA4C,OAFnE;AAIA,UAAMU,MAAM,GAAGrC,WAAW,GACrBQ,MADU,CACH,CAAC,CAAD,EAAIc,OAAJ,CADG,EAEVb,KAFU,CAEJ,CAAC,CAAD,EAAI,KAAKG,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAAJ,CAFI,CAAf;AAIAxB,IAAAA,MAAM,CAACc,IAAD,CAAN,CACKe,SADL,CACe,UADf,EAEKT,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKU,KAHL,GAIKC,MAJL,CAIY,MAJZ,EAKKC,IALL,CAKU,OALV,EAKmB,KALnB,EAMKG,EANL,CAMQ,WANR,EAMqB,KAAK1B,KAAL,CAAW2B,OANhC;AAQApC,IAAAA,MAAM,CAACc,IAAD,CAAN,CACKe,SADL,CACe,UADf,EAEKT,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKiB,IAHL,GAIKC,MAJL;AAMAtC,IAAAA,MAAM,CAACc,IAAD,CAAN,CACKe,SADL,CACe,UADf,EAEKT,IAFL,CAEU,KAAKX,KAAL,CAAWW,IAFrB,EAGKY,IAHL,CAGU,GAHV,EAGe,CAACV,CAAD,EAAGiB,CAAH,KAASA,CAAC,GAAGhB,QAH5B,EAIKS,IAJL,CAIU,GAJV,EAIeV,CAAC,IAAI,KAAKb,KAAL,CAAWe,IAAX,CAAgB,CAAhB,IAAqBU,MAAM,CAACnC,GAAG,CAACuB,CAAC,CAACF,IAAH,CAAJ,CAJ/C,EAKKY,IALL,CAKU,QALV,EAKoBV,CAAC,IAAIY,MAAM,CAACnC,GAAG,CAACuB,CAAC,CAACF,IAAH,CAAJ,CAL/B,EAMKY,IANL,CAMU,OANV,EAMmBT,QANnB,EAOKiB,KAPL,CAOW,MAPX,EAOmB,CAAClB,CAAD,EAAGiB,CAAH,KAAS,KAAK9B,KAAL,CAAWgC,YAAX,KAA4BnB,CAAC,CAACoB,EAA9B,GAAmC,SAAnC,GAA+C,KAAKjC,KAAL,CAAWL,UAAX,CAAsBkB,CAAC,CAACqB,SAAxB,CAP3E,EAQKH,KARL,CAQW,QARX,EAQqB,OARrB,EASKA,KATL,CASW,gBATX,EAS6B,IAT7B;AAWD;;AAEDI,EAAAA,MAAM,GAAG;AAEP,wBAAO;AAAK,MAAA,EAAE,EAAE,YAAT;AAAuB,MAAA,KAAK,EAAE,KAAKnC,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAA9B;AAAkD,MAAA,MAAM,EAAE,KAAKf,KAAL,CAAWe,IAAX,CAAgB,CAAhB,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAED;;AA3EgC;;AA8EnC,eAAejB,UAAf","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\nimport { scaleLinear } from 'd3-scale'\nimport { max, sum } from 'd3-array'\nimport { select } from 'd3-selection'\nimport { legendColor } from 'd3-svg-legend'\nimport { transition } from 'd3-transition'\nimport { scaleThreshold } from 'd3-scale'\n\nconst colorScale = scaleThreshold().domain([5,10,20,30]).range([\"#75739F\", \"#5EAFC6\", \"#41A368\", \"#93C464\"])\n\nclass BarChartD3 extends Component {\n  constructor(props){\n    super(props)\n    this.createBarChart = this.createBarChart.bind(this)\n  }\n\n  componentDidMount() {\n    this.createBarChart()\n  }\n\n  componentDidUpdate() {\n    this.createBarChart()\n  }\n\n  createBarChart() {\n    const node = document.getElementById('svgElement')\n    console.log('node:', node)\n    if(!node){\n      return null\n    }\n\n    const dataMax = max(this.props.data.map(d => sum(d.data)))\n    const barWidth = this.props.size[0] / this.props.data.length\n\n    const legend = legendColor()\n        .scale(colorScale)\n        .labels([\"Wave 1\", \"Wave 2\", \"Wave 3\", \"Wave 4\"])\n\n    select(node)\n        .selectAll(\"g.legend\")\n        .data([0])\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"legend\")\n        .call(legend)\n\n    select(node)\n        .select(\"g.legend\")\n        .attr(\"transform\", \"translate(\" + (this.props.size[0] - 100) + \", 20)\")\n\n    const yScale = scaleLinear()\n        .domain([0, dataMax])\n        .range([0, this.props.size[1]])\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .on(\"mouseover\", this.props.onHover)\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .exit()\n        .remove()\n\n    select(node)\n        .selectAll(\"rect.bar\")\n        .data(this.props.data)\n        .attr(\"x\", (d,i) => i * barWidth)\n        .attr(\"y\", d => this.props.size[1] - yScale(sum(d.data)))\n        .attr(\"height\", d => yScale(sum(d.data)))\n        .attr(\"width\", barWidth)\n        .style(\"fill\", (d,i) => this.props.hoverElement === d.id ? \"#FCBC34\" : this.props.colorScale(d.launchday))\n        .style(\"stroke\", \"black\")\n        .style(\"stroke-opacity\", 0.25)\n\n  }\n\n  render() {\n\n    return <svg id={'svgElement'} width={this.props.size[0]} height={this.props.size[1]}>\n    </svg>\n  }\n}\n\nexport default BarChartD3\n"]},"metadata":{},"sourceType":"module"}