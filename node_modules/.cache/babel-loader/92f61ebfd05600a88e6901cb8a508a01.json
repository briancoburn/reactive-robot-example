{"ast":null,"code":"var _jsxFileName = \"/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { withFauxDOM } from 'react-faux-dom';\nimport * as d3 from 'd3';\nimport { makeStyles } from '@material-ui/core/styles';\nconst styles = makeStyles(theme => ({\n  poobar: {\n    marginTop: '20px'\n  }\n}));\n\nfunction BarChartD3(props) {\n  const faux = props.connectFauxDOM('div', 'chart'); //let [svg, setSvg] = useState()\n\n  const d3Container = useRef(null);\n  const data = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n  useEffect(() => {\n    //let svg = d3.select(faux).append('svg').attr('width', 400).attr('height',300)\n    if (d3Container.current) {\n      console.log('I have d3Container.current==>props.data:', props.data);\n      const svg = d3.select(d3Container.current).select('#d3Graph1') // const svg = d3.select(d3Container.current).append('g')//this keeps appending 'g' every time it renders\n      //const svg = d3.select(d3Container.current)//if I don't append 'g' it renders once and never updates\n      //svg.selectAll('rect').exit().remove()//does nothing, elements don't update\n      .selectAll('rect') //.exit().remove()\n      .data(props.data); // Enter new D3 elements\n      //this works, but keeps appending new elements whenever the data changes\n\n      svg.enter().merge(svg).append('rect').attr('x', (d, i) => i * 25).attr('width', 20) //.transition()// animates adding the elements, but they never change\n      .attr('y', d => {\n        return 100 - d;\n      }).attr('height', d => d); //console.log('rects:', rects)\n      //.exit().remove()//elements keep accumulating\n      //.text((d) => d)\n      //d3.selectAll('rect').exit().remove()//elements keep accumulating\n      //rects.exit().remove()//elements keep accumulating\n      //svg.selectAll('rect').exit().remove()\n    } // let g = svg.append('g').attr('id','group1')\n    // console.log('props:', props)\n    // console.log('g:', g)\n    // //d3.select('#group1')\n    //   g.append('rect')\n    //     .data([1,2,3,4,5,6,7,8,9])\n    //   .attr('width', 10)\n    //   .attr('height', 10)\n    //   .attr('x', (d)=>{return d * 10})\n    //   .style('fill','red')\n    ///props.animateFauxDOM(800)\n\n  }, [data, d3Container.current]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"d3-component\",\n    width: 400,\n    height: 200,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"d3Graph1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 10\n    }\n  })));\n}\n\nexport default withFauxDOM(BarChartD3);","map":{"version":3,"sources":["/Users/briancoburn/WebstormProjects/test/src/BarChartD3.js"],"names":["React","useEffect","useRef","useState","withFauxDOM","d3","makeStyles","styles","theme","poobar","marginTop","BarChartD3","props","faux","connectFauxDOM","d3Container","data","current","console","log","svg","select","selectAll","enter","merge","append","attr","d","i"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,QAAiD,OAAjD;AACA,SAAQC,WAAR,QAA0B,gBAA1B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AAEA,MAAMC,MAAM,GAAGD,UAAU,CAAEE,KAAD,KAAU;AAClCC,EAAAA,MAAM,EAAC;AACLC,IAAAA,SAAS,EAAC;AADL;AAD2B,CAAV,CAAD,CAAzB;;AAMA,SAASC,UAAT,CAAoBC,KAApB,EAA0B;AACxB,QAAMC,IAAI,GAAGD,KAAK,CAACE,cAAN,CAAqB,KAArB,EAA2B,OAA3B,CAAb,CADwB,CAExB;;AACA,QAAMC,WAAW,GAAGb,MAAM,CAAC,IAAD,CAA1B;AACA,QAAMc,IAAI,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,EAAa,CAAb,EAAe,CAAf,EAAiB,CAAjB,CAAb;AACAf,EAAAA,SAAS,CAAC,MAAI;AACZ;AACA,QAAGc,WAAW,CAACE,OAAf,EAAuB;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAAwDP,KAAK,CAACI,IAA9D;AACA,YAAMI,GAAG,GAAGf,EAAE,CAACgB,MAAH,CAAUN,WAAW,CAACE,OAAtB,EAA+BI,MAA/B,CAAsC,WAAtC,EACb;AACC;AACE;AAHU,OAITC,SAJS,CAIC,MAJD,EAKV;AALU,OAMTN,IANS,CAMJJ,KAAK,CAACI,IANF,CAAZ,CAFqB,CAUrB;AACI;;AAEFI,MAAAA,GAAG,CAACG,KAAJ,GACGC,KADH,CACSJ,GADT,EAECK,MAFD,CAEQ,MAFR,EAGCC,IAHD,CAGM,GAHN,EAGW,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAG,EAHzB,EAICF,IAJD,CAIM,OAJN,EAIe,EAJf,EAKA;AALA,OAMCA,IAND,CAMM,GANN,EAMYC,CAAD,IAAK;AAAC,eAAO,MAAIA,CAAX;AAAa,OAN9B,EAOCD,IAPD,CAOM,QAPN,EAOgBC,CAAC,IAAIA,CAPrB,EAbmB,CAqBnB;AACC;AACD;AACC;AACD;AACF;AAED,KA9BW,CA+BZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;;AACD,GA9CQ,EA8CP,CAACX,IAAD,EAAOD,WAAW,CAACE,OAAnB,CA9CO,CAAT;AAiDA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,KAAK,EAAE,GAFT;AAGE,IAAA,MAAM,EAAE,GAHV;AAIE,IAAA,GAAG,EAAEF,WAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKC;AAAG,IAAA,EAAE,EAAC,UAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALD,CADF,CADJ;AAWD;;AACD,eAAeX,WAAW,CAACO,UAAD,CAA1B","sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\nimport {withFauxDOM} from 'react-faux-dom'\nimport * as d3 from 'd3'\nimport {makeStyles} from '@material-ui/core/styles'\n\nconst styles = makeStyles((theme)=>({\n  poobar:{\n    marginTop:'20px'\n  }\n}))\n\nfunction BarChartD3(props){\n  const faux = props.connectFauxDOM('div','chart')\n  //let [svg, setSvg] = useState()\n  const d3Container = useRef(null);\n  const data = [1,2,3,4,5,6,7,8,9]\n  useEffect(()=>{\n    //let svg = d3.select(faux).append('svg').attr('width', 400).attr('height',300)\n    if(d3Container.current){\n      console.log('I have d3Container.current==>props.data:', props.data)\n      const svg = d3.select(d3Container.current).select('#d3Graph1')\n     // const svg = d3.select(d3Container.current).append('g')//this keeps appending 'g' every time it renders\n      //const svg = d3.select(d3Container.current)//if I don't append 'g' it renders once and never updates\n        //svg.selectAll('rect').exit().remove()//does nothing, elements don't update\n        .selectAll('rect')\n        //.exit().remove()\n        .data(props.data)\n\n      // Enter new D3 elements\n          //this works, but keeps appending new elements whenever the data changes\n\n        svg.enter()\n          .merge(svg)\n        .append('rect')\n        .attr('x', (d, i) => i * 25)\n        .attr('width', 20)\n        //.transition()// animates adding the elements, but they never change\n        .attr('y', (d)=>{return 100-d})\n        .attr('height', d => d)\n        //console.log('rects:', rects)\n         //.exit().remove()//elements keep accumulating\n        //.text((d) => d)\n         //d3.selectAll('rect').exit().remove()//elements keep accumulating\n        //rects.exit().remove()//elements keep accumulating\n      //svg.selectAll('rect').exit().remove()\n\n    }\n    // let g = svg.append('g').attr('id','group1')\n    // console.log('props:', props)\n    // console.log('g:', g)\n    // //d3.select('#group1')\n    //   g.append('rect')\n    //     .data([1,2,3,4,5,6,7,8,9])\n    //   .attr('width', 10)\n    //   .attr('height', 10)\n    //   .attr('x', (d)=>{return d * 10})\n    //   .style('fill','red')\n\n\n\n\n    ///props.animateFauxDOM(800)\n  },[data, d3Container.current])\n\n\n  return (\n      <div>\n        <svg\n          className=\"d3-component\"\n          width={400}\n          height={200}\n          ref={d3Container}\n        ><g id='d3Graph1'></g></svg>\n      </div>\n  )\n\n}\nexport default withFauxDOM(BarChartD3)"]},"metadata":{},"sourceType":"module"}