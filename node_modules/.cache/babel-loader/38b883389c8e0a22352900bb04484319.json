{"ast":null,"code":"var _jsxFileName = \"/Users/briancoburn/WebstormProjects/test/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { createStore } from 'redux';\nimport { Line, Doughnut } from \"react-chartjs-2\";\n\nvar Chart = require('chart.js');\n/**\n * This is a reducer, a pure function with (state, action) => state signature.\n * It describes how an action transforms the state into the next state.\n *\n * The shape of the state is up to you: it can be a primitive, an array, an object,\n * or even an Immutable.js data structure. The only important part is that you should\n * not mutate the state object, but return a new object if the state changes.\n *\n * In this example, we use a `switch` statement and strings, but you can use a helper that\n * follows a different convention (such as function maps) if it makes sense for your\n * project.\n */\n\n\nlet defaultState = {\n  chartValues: [1, 2, 5, 2, 7, 9, 3]\n};\nconst MAX_CHART_VALS = 7;\n\nfunction App() {\n  const [chartValues, updateChartValues] = useState([]);\n  const [latestChartValue, updateLatestChartValue] = useState([]);\n\n  function reducer(state = defaultState, action) {\n    switch (action.type) {\n      case 'UPDATE_CHART':\n        let chartValuesTemp = state.chartValues.concat([]);\n        chartValuesTemp.push(action.value);\n\n        if (chartValuesTemp.length > MAX_CHART_VALS) {\n          chartValuesTemp.shift();\n        }\n\n        return { ...state,\n          chartValues: chartValuesTemp\n        };\n\n      default:\n        return state;\n    }\n  }\n\n  useEffect(() => {\n    let store = createStore(reducer);\n    store.subscribe(() => {\n      let state = store.getState(); //console.log('state:', state)\n\n      updateChartValues(state.chartValues); //updateLatestChartValue(state.chartValues[state.chartValues.length-1])\n    });\n    setInterval(() => {\n      store.dispatch({\n        type: 'UPDATE_CHART',\n        value: Math.floor(Math.random() * 100)\n      });\n    }, 1000);\n  }, []); // The only way to mutate the internal state is to dispatch an action.\n  // The actions can be serialized, logged or stored and later replayed.\n  // store.dispatch({ type: 'INCREMENT' })\n  // // 1\n  // store.dispatch({ type: 'INCREMENT' })\n  // // 2\n  // store.dispatch({ type: 'DECREMENT' })\n  // 1\n\n  console.log('chartValues:', chartValues);\n  console.log('Date.now():', Date.now());\n\n  function formatTime(value) {\n    if (value < 10) {\n      return '0' + value;\n    }\n\n    return value;\n  }\n\n  let currentSecond = new Date(Date.now());\n  let currentSecondMinus1 = new Date(currentSecond - 1000);\n  let currentSecondMinus2 = new Date(currentSecond - 2000);\n  let currentSecondMinus3 = new Date(currentSecond - 3000);\n  let currentSecondMinus4 = new Date(currentSecond - 4000);\n  let currentSecondMinus5 = new Date(currentSecond - 5000);\n  let currentSecondMinus6 = new Date(currentSecond - 6000);\n  let label0 = formatTime(currentSecond.getHours()) + ':' + formatTime(currentSecond.getMinutes()) + ':' + formatTime(currentSecond.getSeconds());\n  let label1 = formatTime(currentSecondMinus1.getHours()) + ':' + formatTime(currentSecondMinus1.getMinutes()) + ':' + formatTime(currentSecondMinus1.getSeconds());\n  let label2 = formatTime(currentSecondMinus2.getHours()) + ':' + formatTime(currentSecondMinus2.getMinutes()) + ':' + formatTime(currentSecondMinus2.getSeconds());\n  let label3 = formatTime(currentSecondMinus3.getHours()) + ':' + formatTime(currentSecondMinus3.getMinutes()) + ':' + formatTime(currentSecondMinus3.getSeconds());\n  let label4 = formatTime(currentSecondMinus4.getHours()) + ':' + formatTime(currentSecondMinus4.getMinutes()) + ':' + formatTime(currentSecondMinus4.getSeconds());\n  let label5 = formatTime(currentSecondMinus5.getHours()) + ':' + formatTime(currentSecondMinus5.getMinutes()) + ':' + formatTime(currentSecondMinus5.getSeconds());\n  let label6 = formatTime(currentSecondMinus6.getHours()) + ':' + formatTime(currentSecondMinus6.getMinutes()) + ':' + formatTime(currentSecondMinus6.getSeconds());\n  let data = {\n    labels: [label6, label5, label4, label3, label2, label1, label0],\n    datasets: [{\n      label: \"Spam messages received per second\",\n      fillColor: \"rgba(220,220,220,0.2)\",\n      strokeColor: \"rgba(220,220,220,1)\",\n      pointColor: \"rgba(220,220,220,1)\",\n      pointStrokeColor: \"#fff\",\n      pointHighlightFill: \"#fff\",\n      pointHighlightStroke: \"rgba(220,220,220,1)\",\n      data: chartValues\n    }]\n  }; // let data =\n  //   {\n  //     labels:['a','b','c','d'],\n  //     dataSets:[{\n  //       type:'line',\n  //       backgroundColor: \"rgba(142, 243, 197, 0.5)\",\n  //       pointBackgroundColor: \"#fff\",\n  //       pointHoverBackgroundColor: '#fff',\n  //       pointStyle: \"circle\",\n  //       label: \"Monthly Expenses\",\n  //       borderColor: \"#2be1d8\",\n  //       borderWidth: 3,\n  //       borderJoinStyle: \"round\",\n  //       lineTension: 0.3,\n  //       fontColor: \"#fff\",\n  //       hitRadius: 5,\n  //       hoverRadius: 8,\n  //       radius: 4,\n  //       data: chartValues\n  //     }]\n  //   }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Line, {\n    data: data || {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, 'Spam messages received just this last second:'), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, chartValues[chartValues.length - 1] + ' at ' + new Date(Date.now()).toLocaleString()));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/briancoburn/WebstormProjects/test/src/App.js"],"names":["React","useState","useEffect","createStore","Line","Doughnut","Chart","require","defaultState","chartValues","MAX_CHART_VALS","App","updateChartValues","latestChartValue","updateLatestChartValue","reducer","state","action","type","chartValuesTemp","concat","push","value","length","shift","store","subscribe","getState","setInterval","dispatch","Math","floor","random","console","log","Date","now","formatTime","currentSecond","currentSecondMinus1","currentSecondMinus2","currentSecondMinus3","currentSecondMinus4","currentSecondMinus5","currentSecondMinus6","label0","getHours","getMinutes","getSeconds","label1","label2","label3","label4","label5","label6","data","labels","datasets","label","fillColor","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","toLocaleString"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { createStore } from 'redux'\nimport {Line, Doughnut} from \"react-chartjs-2\";\nvar Chart = require('chart.js');\n\n/**\n * This is a reducer, a pure function with (state, action) => state signature.\n * It describes how an action transforms the state into the next state.\n *\n * The shape of the state is up to you: it can be a primitive, an array, an object,\n * or even an Immutable.js data structure. The only important part is that you should\n * not mutate the state object, but return a new object if the state changes.\n *\n * In this example, we use a `switch` statement and strings, but you can use a helper that\n * follows a different convention (such as function maps) if it makes sense for your\n * project.\n */\n\nlet defaultState = {\n  chartValues:[1,2,5,2,7,9,3]\n}\nconst MAX_CHART_VALS = 7\n\nfunction App() {\n\n  const [chartValues, updateChartValues] = useState([])\n  const [latestChartValue, updateLatestChartValue] = useState([])\n  function reducer(state=defaultState, action) {\n    switch (action.type) {\n      case 'UPDATE_CHART':\n        let chartValuesTemp = state.chartValues.concat([])\n        chartValuesTemp.push(action.value)\n        if(chartValuesTemp.length > MAX_CHART_VALS){\n          chartValuesTemp.shift()\n        }\n        return {...state,chartValues:chartValuesTemp}\n      default:\n        return state\n    }\n  }\n\n  useEffect(()=>{\n    let store = createStore(reducer)\n    store.subscribe(() => {\n      let state = store.getState()\n      //console.log('state:', state)\n      updateChartValues(state.chartValues)\n      //updateLatestChartValue(state.chartValues[state.chartValues.length-1])\n    })\n    setInterval(()=>{\n      store.dispatch({type:'UPDATE_CHART', value: Math.floor(Math.random() * 100)})\n    },1000)\n  },[])\n\n\n  // The only way to mutate the internal state is to dispatch an action.\n  // The actions can be serialized, logged or stored and later replayed.\n  // store.dispatch({ type: 'INCREMENT' })\n  // // 1\n  // store.dispatch({ type: 'INCREMENT' })\n  // // 2\n  // store.dispatch({ type: 'DECREMENT' })\n  // 1\n  console.log('chartValues:', chartValues)\n  console.log('Date.now():', Date.now())\n\n  function formatTime(value){\n    if(value < 10){\n      return '0'+value\n    }\n    return value\n  }\n\n  let currentSecond = new Date(Date.now())\n  let currentSecondMinus1 = new Date(currentSecond - 1000)\n  let currentSecondMinus2 = new Date(currentSecond - 2000)\n  let currentSecondMinus3 = new Date(currentSecond - 3000)\n  let currentSecondMinus4 = new Date(currentSecond - 4000)\n  let currentSecondMinus5 = new Date(currentSecond - 5000)\n  let currentSecondMinus6 = new Date(currentSecond - 6000)\n  let label0 = formatTime(currentSecond.getHours())+':'+formatTime(currentSecond.getMinutes())+':'+formatTime(currentSecond.getSeconds())\n  let label1 = formatTime(currentSecondMinus1.getHours())+':'+formatTime(currentSecondMinus1.getMinutes())+':'+formatTime(currentSecondMinus1.getSeconds())\n  let label2 = formatTime(currentSecondMinus2.getHours())+':'+formatTime(currentSecondMinus2.getMinutes())+':'+formatTime(currentSecondMinus2.getSeconds())\n  let label3 = formatTime(currentSecondMinus3.getHours())+':'+formatTime(currentSecondMinus3.getMinutes())+':'+formatTime(currentSecondMinus3.getSeconds())\n  let label4 = formatTime(currentSecondMinus4.getHours())+':'+formatTime(currentSecondMinus4.getMinutes())+':'+formatTime(currentSecondMinus4.getSeconds())\n  let label5 = formatTime(currentSecondMinus5.getHours())+':'+formatTime(currentSecondMinus5.getMinutes())+':'+formatTime(currentSecondMinus5.getSeconds())\n  let label6 = formatTime(currentSecondMinus6.getHours())+':'+formatTime(currentSecondMinus6.getMinutes())+':'+formatTime(currentSecondMinus6.getSeconds())\n\n  let data = {\n    labels: [label6, label5, label4, label3, label2, label1, label0],\n    datasets: [\n      {\n        label: \"Spam messages received per second\",\n        fillColor: \"rgba(220,220,220,0.2)\",\n        strokeColor: \"rgba(220,220,220,1)\",\n        pointColor: \"rgba(220,220,220,1)\",\n        pointStrokeColor: \"#fff\",\n        pointHighlightFill: \"#fff\",\n        pointHighlightStroke: \"rgba(220,220,220,1)\",\n        data: chartValues\n      }\n    ]\n  };\n  // let data =\n  //   {\n  //     labels:['a','b','c','d'],\n  //     dataSets:[{\n  //       type:'line',\n  //       backgroundColor: \"rgba(142, 243, 197, 0.5)\",\n  //       pointBackgroundColor: \"#fff\",\n  //       pointHoverBackgroundColor: '#fff',\n  //       pointStyle: \"circle\",\n  //       label: \"Monthly Expenses\",\n  //       borderColor: \"#2be1d8\",\n  //       borderWidth: 3,\n  //       borderJoinStyle: \"round\",\n  //       lineTension: 0.3,\n  //       fontColor: \"#fff\",\n  //       hitRadius: 5,\n  //       hoverRadius: 8,\n  //       radius: 4,\n  //       data: chartValues\n  //     }]\n  //   }\n  return (\n    <div className=\"App\">\n      <Line data={data || {}} />\n      <div>{'Spam messages received just this last second:'}</div>\n      <div>{chartValues[chartValues.length-1]+' at '+new Date(Date.now()).toLocaleString()}</div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}